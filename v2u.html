<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="utf-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>VoCore2 | Coin-sized Linux Computer</title>
 <link rel="stylesheet" href="css/bootstrap.min.css">
 <link rel="stylesheet" href="css/vocore.min.css">
 <link rel="icon" href="favicon.ico">
</head>

<body>

  <center><h1>VoCore2 Ultimate</h1></center>
  <center><h3><small>The Coin-sized Linux Computer with external equipment and interface</small></h3></center>
  <div class="container">
   <center><img class="thumbnail" src="img/v2u/v2u.head.jpg" width="84%"></center>
   <center><iframe width="84%" height="480" src="http://www.youtube.com/embed/LnjfesAr2fk"></iframe></center>
  </div>

  <hr/>
  <div class="container">
   <p><b>IMPORTANT:   </b>Please upgrade your VoCore2 Ultimate firmware to latest version for best performance.</p>

   <h3>Parameters</h3>
   <table class="table table-bordered table-striped">
    <thead><tr><th></th><th>Details</th></tr></thead>
    <tbody>
     <tr><th class=text-nowrap scope=row>SIZE</th><td>28mm x 30mm x 30mm</td></tr>
     <tr><th class=text-nowrap scope=row>CPU</th><td>MT7628AN, 580 MHz, MIPS 24K</td></tr>
     <tr><th class=text-nowrap scope=row>MEMORY</th><td>128MB, DDR2, 166MHz</td></tr>
     <tr><th class=text-nowrap scope=row>STORAGE</th><td>16M NOR on board, support SDXC up to 2TB</td></tr>
     <tr><th class=text-nowrap scope=row>WIRELESS</th><td>802.11n, 2T2R, speed up to 300Mbps.</td></tr>
     <tr><th class=text-nowrap scope=row>ANTENNA</th><td>One U.FL slot, one on board antenna.</td></tr>
     <tr><th class=text-nowrap scope=row>ETHERNET</th><td>1 port/5 ports, up to 100Mbps.</td></tr>
     <tr><th class=text-nowrap scope=row>USB</th><td>Support USB 2.0, up to 480MBit/s.</td></tr>
     <tr><th class=text-nowrap scope=row>PCIe 1.1</th><td>Supported</td></tr>
     <tr><th class=text-nowrap scope=row>GPIO</th><td>>=40 (pinmux)</td></tr>
     <tr><th class=text-nowrap scope=row>UART</th><td>x3 (UART2 for debug console)</td></tr>
     <tr><th class=text-nowrap scope=row>PWM</th><td>x4</td></tr>
     <tr><th class=text-nowrap scope=row>A/D CONVERT</th><td>4 channels</td></tr>
     <tr><th class=text-nowrap scope=row>D/A CONVERT</th><td>1 channels</td></tr>
     <tr><th class=text-nowrap scope=row>AUDIO PLAYBACK</th><td>Support</td></tr>
     <tr><th class=text-nowrap scope=row>AUDIO RECORD</th><td>Support</td></tr>
     <tr><th class=text-nowrap scope=row>DEBUG CONSOLE</th><td>On board driver-free USB2TTL</td></tr>
     <tr><th class=text-nowrap scope=row>SHELL</th><td>Included</td></tr>
     <tr><th class=text-nowrap scope=row>POWER SUPPLY</th><td>3.6V ~ 6.0V</td></tr>
     <tr><th class=text-nowrap scope=row>POWER CONSUMPTION</th><td>74mA wifi standby, 230mA wifi full speed, 5V input.</td></tr>
    </tbody>
   </table>

   <h3>Sources</h3>
   <p><b>Hardware: </b><a href="http://vonger.cn/misc/vocore2/source.zip">Download</a>&nbsp;&nbsp;&nbsp;<span class="label label-success">md5:710ce05e5f95076b5e42b2feaf8a4de4</span></p>
   <p><b>OpenWrt 1505: </b><a href="http://vonger.cn/misc/vocore2/openwrt.tar.bz2">Download</a>&nbsp;&nbsp;&nbsp;<span class="label label-success">md5:613621b833102e7ccde7b50c5f5ef6a7</span></p>
   <p><b>MediaTek SDK: </b><a href="http://vonger.cn/misc/vocore2/mtksdk-openwrt-3.10.14-20141127-30965ec3.tar.bz2">Download</a>&nbsp;&nbsp;&nbsp;<span class="label label-success">md5:4591c418ba6599920337859633d2aa18</span></p>

   <h3 name="download">Downloads</h3>
   <p><b>note</b>: normally, we upgrade or fix brick are using Firmware. Flash Image is a clone of the full flash, for professional usage only. </p>
   <p><b>Firmware: </b><a href="http://vonger.cn/misc/vocore2/20170527.bin">Download(2017.05.27)</a>&nbsp;&nbsp;&nbsp;<span class="label label-success">md5:a2eaf168855d74ea7a70b65ebf4fea90</span></p>
   <p><b>Flash Image: </b><a href="http://vonger.cn/misc/vocore2/ultimate.16m.img">Download</a>&nbsp;&nbsp;&nbsp;<span class="label label-success">md5:f4c527a1e563d0ad7ef9ab0b5e0b35c6</span></p>
   <p><b>Toolchain: </b><a href="http://vonger.cn/misc/vocore2/toolchain.tar.bz2">Download (Ubuntu 14.04 x64)</a></p>
   <p><b>Datasheet: </b><a href="http://vonger.cn/misc/vocore2/datasheet.zip">Download</a></p>


   <h3>Details</h3>
   <p>Super small router but contains microSD, USB2.0, A/D, D/A, Ethernet Port, audio record/play, up to 300Mbps wireless transfer speed, low power consume. It is a perfect portable router.</p>

   <center><img src="img/v2/v2.pins.png" width="84%"></img></center>
   <center><h4><span class="label label-default">read more from <a href="v2.html">VoCore2</a> description</span></h4></center>
   <center><img src="img/v2/v2.size.png" width="84%"></img></center>
   <center><img src="img/v2u/v2u.pins.png" width="84%"></img></center>


   <h3>Tutorials</h3>
   <h4>Connect to Power</h4>
   <p>1.a connect the microUSB port on the box with a USB charger(5.0V).</p>
   <p>1.b connect the microUSB port on the box to your computer USB port(5.0V).</p>
   <p><b>note</b>: be careful, high voltage will damage your VoCore.</p>
   <p>2. if everything works, after 30 seconds, you will find VoCore2 in your computer hotspot list.</p>
   <p>3. connect to VoCore2 hotspot.</p>
   <p>4.a using ssh or putty or similar tools login to VoCore2(root/vocore).</p>
   <p>4.b using internal USB2TTL, it is driver free, once you connect it to your computer by USB, you will find a serial port in your device list, connect to it. </p>
   <p><b>note</b>: for windows(>xp, support usb cdc), you can find USB2TTL device at your device manager; for Linux/MacOS, you will find USB2TTL device at /dev/tty.usbmodem_____1</p>
   <p><b><font color="red">important</font></b> : <code>UART speed is 115200bps, 8bits, no even, 1 stop bit</code></p>
   <hr/>

   <h4>Connect to VoCore2 Console through its MicroUSB Port</h4>
   <p>video tutorial: <a href="https://youtu.be/W3UVXb5YM2k">youtube</a></p>
   <p>VoCore2 Ultimate, VoCore2 Audio have on board USB2TTL, you can directly connect its microUSB and your computer.</p>
   <p>windows: if you need to install driver manually, please follow tutorial in the package: <a href="http://vonger.cn/misc/vocore2/tools/usb2ttl.zip">install usb cdc driver</a>.</p>
   <p>macos: connect VoCore2 to your computer, you will find it in /dev/tty.usb_______1, then you can use kermit or screen connect to it.</p>
   <p>linux: connect VoCore2 to your computer, you will find it in /dev/ttyACM0, then you can use kermit or screen or minicom connect to it.</p>
   <p>USB2TTL parameter: 115200bps, 8 data bits, no even-odd check, 1 stop bit.</p>
   <hr/>

   <h4>Setup AP + STA Mode</h4>
   <p>video tutorial: <a href="https://youtu.be/IPt5cxg5K98">youtube</a></p>
   <p><b>note</b>: LuCI interface(the web interface) has bugs, MUST use console command.</p>
   <p>1. connect to your VoCore to your computer through its microUSB.</p>
   <p>2. run command in console(replace [TARGET AP SSID] to the target ap ssid you want to connect to, [TARGET AP PASSWORD] is its password).</p>
   <p><b>important</b>: this setup MUST run in UART console. SSH console through wireless or ethernet will be disconnected during the setup.</p>
   <p>uci set wireless.sta.ssid="[TARGET AP SSID]"</p>
   <p>uci set wireless.sta.key="[TARGET AP PASSWORD]"</p>
   <p>uci set wireless.sta.network=wwan</p>
   <p>uci set wireless.sta.disabled=0</p>
   <p>uci commit</p>
   <p>3. set sta to disabled, so next boot if your hotspot disappear, you still able to connect to VoCore2.</p>
   <p><b>note:</b>: put the following code to /etc/rc.local</p>
   <p>uci set wireless.sta.disabled=0</p>
   <p>uci commit</p>
   <p>/etc/init.d/network restart</p>
   <p>sleep 10</p>
   <p>uci set wireless.sta.disabled=1</p>
   <p>uci commit</p>
   <p>4. setup firewall to enable access internet through your hotspot.</p>
   <p>uci del_list firewall.@zone[1].network=wwan</p>
   <p>uci add_list firewall.@zone[1].network=wwan</p>
   <p>uci set firewall.@zone[1].input=ACCEPT</p>
   <p>uci set firewall.@zone[1].output=ACCEPT</p>
   <p>uci set firewall.@zone[1].forward=ACCEPT</p>
   <p>uci set firewall.@zone[1].masq=1</p>
   <p>uci set firewall.@zone[1].mtu_fix=1</p>
   <p>uci commit</p>
   <p>5. enable dhcp then it will get ip from your hotspot.</p>
   <p>uci delete network.wwan</p>
   <p>uci set network.wwan=interface</p>
   <p>uci set network.wwan.proto=dhcp</p>
   <p>uci commit</p>
   <p>6. reboot VoCore2 or call "/etc/init.d/network restart".</p>
   <p>7. wait a moment, now it is in AP+STA mode</p>
   <p><b>note</b>: more information please check Vonger's Blog: <a href="http://vonger.cn/?p=2691">VoCore2 AP + STA</a></p>
   <hr/>

   <h4>Upgrade VoCore2 Firmware</h4>
   <p>1. download the latest firmware(not the flash image) in this page Download section.</p>
   <p>2. connect to your VoCore hotspot, open browser view 192.168.1.1 or 192.168.61.1.</p>
   <center><img class="thumbnail" src="img/v2/v2.update.jpg" width="84%"></center>
   <p>3. LuCI console using username: root, password: vocore, click on "Login" (picture part 1).</p>
   <p>4. select "System" -> "Backup/Flash Firmware" (picture part 2).</p>
   <p>5. click on "Choose File", choose your downloaded firmware(again, not the flash image, picture part 3), then click "Flash Image".</p>
   <p>6. it will upload the firmware to your VoCore2, takes a few seconds, check if the md5 matched. (picture part 4)</p>
   <p>7. if everything ok, press "Process".</p>
   <p>8. normally it will take 2~3 minutes, please wait until it is ready.</p>
   <p><b>note</b>: if power cut off during the upgrade process, your VoCore2 will brick, check "Fix Bricked VoCore2"</p>
   <hr/>

   <h4>Connect Speaker to VoCore2 to Play Music</h4>
   <p><b>note</b>: please update your firmware to latest version.</p>
   <p>1. download a <a href="http://vonger.cn/misc/vocore2/tools/test.mp3">music</a> to VoCore2 memory(put it in folder /tmp/).</p>
   <p>2. connect a standard 3.5mm headphone or speaker to VoCore2.</p>
   <p>3. in VoCore2 console call "madplay /tmp/test.mp3", the music will play in seconds.</p>
   <p><b>note</b>: this is used to test audio, we will update the audio driver to enable more features.</p>
   <hr/>

   <h4>Connect VoCore Camera to VoCore2(DIY Wireless Camera)</h4>
   <p><b>note</b>: please update your firmware to latest version.</p>
   <p>1. connect usb camera to VoCore2.</p>
   <p>2. now you find device at /dev/video0, /dev/video1.</p>
   <p><b>note</b>: /dev/video0 is mjpeg stream, /dev/video1 is h264 stream.</p>
   <p>3. run mjpg-streamer or setup in LuCI(web ui 192.168.61.1) -> MJPG-STREAMER.</p>
   <p>4. now you can view the camera video in your browser at http://192.168.61.1:8080/?action=stream</p>
   <hr/>

   <h4>Compile OpenWRT for VoCore2</h4>
   <p>1. install Ubuntu 14.04 64bit Server to Virtual Machine.</p>
   <p>2. in virtualbox, we will need install some packages to compile openwrt:</p>
   <p>sudo apt-get install gcc g++ binutils patch bzip2 flex bison make autoconf gettext texinfo unzip sharutils subversion libncurses5-dev ncurses-term zlib1g-dev libssl-dev python</p>
   <p>3. download openwrt at "Sources" section in this page, software part.</p>
   <p>4. call "tar -jxvf openwrt.tar.bz2" to uncompress the package.</p>
   <p>5. call "make menuconfig" in the openwrt folder, configure openwrt in menu, choose MT7688/28/VoCore2 in menu.</p>
   <p>6. call "make" in the openwrt folder, start the make process</p>
   <hr/>

   <h4>Compile your App for VoCore2</h4>
   <p>1. compile openwrt for VoCore2, it will create toolchain or download it at Downloads/Toolchain(for Ubuntu 14.04 64bit).
   <p>2. make a simple code in C, compile it in command line.</p>
   <code>/path.to.your.toolchain/bin/mipsel-openwrt-linux-gcc -g yourcode.c -o yourcode</code>
   <p>3. after this, you will get an executable file named "yourcode", use scp, copy it to your VoCore2</p>
   <p>4. in VoCore2, call <code>chmod +x yourcode</code>, after that, you can run it in VoCore2, call <code>./yourcode</code></p>
   <hr/>

   <h4>Upload Firmware</h4>
   <p>1. upload firmware through luci, please read "Upgrade VoCore2 Firmware".</a></p>
   <p>2. upload firmware through console, connected to VoCore hotspot.</p>
   <p>(1) copy from pc to VoCore[operate in PC]: scp [your firmware].bin root@192.168.61.1:/tmp/vocore2.bin</p>
   <p>here is two choices, 2.a will erase all data/config you write to VoCore, 2.b just upgrade the firmware but keep them.</p>
   <p>(2.a) write to VoCore nor flash[operate in VoCore]: mtd -e firmware write /tmp/vocore2.bin firmware</p>
   <p>(2.b) system upgrade VoCore nor flash[operate in VoCore]: sysupgrade /tmp/vocore2.bin firmware</p>
   <p>(3) wait until mtd done, reboot your VoCore.</p>
   <p><b>note</b>: if you want set your VoCore back to first time boot up, call "firstboot" in console.</p>
   <hr/>

   <h4>Fix Bricked VoCore2 (uboot alive)</h4>
   <p>1. connect your VoCore to computer through microUSB, keep your VoCore in reset mode.</p>
   <p><b>note:</b>: to keep VoCore in reset mode, you need to connect RST and GND by wire, use this step to wait until USB2TTL ready.</p>
   <p>2. open tty tools(must have kermit protocol), such as kermit, ckermit. </p>
   <p><b>note:</b>: VoCore2 GD32 USB2TTL is driver free, but have to wait 6~8 seconds until it is ready, once it is ready, we can disconnect RST and GND, then it is able to boot normally.</p>
   <p>3. power up your VoCore, once you find: "0: Load system code then write to Flash via SERIAL.", press '0'.</p>
   <p><b>note</b>: VoCore will show "## Ready for binary (kermit) download to 0x80100000 at 115200 bps..."</p>
   <p><b>note</b>: kermit: press Ctrl and '\' same time then press 'c', you will switch to kermit command console.</p>
   <p>5. send upgrade firmware to VoCore, after that, back to VoCore uboot console.</p>
   <p><b>note</b>: kermit: call "send path/to/your/upgrade/file/on/pc.bin" to send firmware, around 10 minutes, once it finished, call 'c' back to console.</p>
   <p>6. wait around 20~30 seconds, firmware uploaded, your VoCore will reboot.</p>
   <hr/>

   <h4>Fix Bricked VoCore2 (uboot dead)</h4>
   <p>1. prepare <b>another VoCore/VoCore2</b> OR <b>a flash loader</b> and six wires.</p>
   <p>2.a. using another VoCore/VoCore2 to recover your bricked VoCore2.</p>
   <p>2.a.1 check blog http://vonger.cn/?p=8054</p>
   <p>2.b. using flash loader to recover your bricked VoCore2.</p>
   <p>2.b.1 disconnect VoCore2 from power; </p>
   <p>2.b.2 connect VoCore2 GND to flash loader GND; </p>
   <p>2.b.3 VoCore2 +3.3V to flash loader +3.3V; </p>
   <p>2.b.4 VoCore2 SPI MISO -> flash loader SPI MISO; </p>
   <p>2.b.5 VoCore2 SPI MOSI -> flash loader SPI MOSI; </p>
   <p>2.b.6 VoCore2 SPI CS0 -> flash loader SPI CS; </p>
   <p>2.b.7 VoCore2 SPI CLK -> flash loader SPI CLOCK; </p>
   <p>2.b.8 VoCore2 RST -> VoCore2 GND; (keep VoCore2 in reset mode) </p>
   <p><b>note</b>: if not work, swap MISO/MOSI.</p>
   <p>2.b.9 now, download then send "Flash Image" to VoCore2.2.</p>
   <p>2.b.10 remove wires, connect VoCore2 back to power, everything should back normal.</p>
   <p>3. option: better to upgrade your firmware after recover, Flash Image is out of date.</p>
   <hr/>

   <h4>Enable another antenna on VoCore2(standard version only)</h4>
   <p>On VoCore2 standard version we have another antenna, default it is power off status(to avoid two antenna cross-talk to each other), if you have a external U.FL antenna, you can connect it to VoCore2, convert it from a portable router to a full function 802.11n router, maxmize its speed and signal strength.</p>
   <p><b>note</b>: suggest distance between two antennas is > 6cm</p>
   <p>1. download a <a href="http://vonger.cn/misc/vocore2/tools/factory.zip">factory setting read/write tool</a> to /tmp/ on VoCore, chmod +x /tmp/factory.</p>
   <p>2. we run the following script to enable second antenna.</p>
   <p>enable second antenna: </p>
   <p><code>/tmp/factory 0x34 0x22 > /tmp/mtd2.tmp</code></p>
   <p><code>mtd -e factory write /tmp/mtd2.tmp factory</code></p>
   <p>disable second antenna: </p>
   <p><code>/tmp/factory 0x34 0x11 > /tmp/mtd2.tmp</code></p>
   <p><code>mtd -e factory write /tmp/mtd2.tmp factory</code></p>
   <p>3. restart wireless driver is necessary(better to reboot). </p>
   <p>call "wifi" or "reboot" on VoCore2.</p>
   <hr/>

   <h4>Open the plastic shell (Ultimate Version)</h4>
   <p>1. use a paper knife open the box(1-4).</p>
   <p>2. you can simply use a pencil push it out from ethernet port side(5).</p>
   <center><img class="thumbnail" src="img/v2u/v2u.box.jpg" width="84%"></center>
   <hr/>

   <h4>Directly write to memory/register</h4>
   <p>We made a simple tool for this, <a href="http://vonger.cn/misc/vocore2/tools/mem.zip">download here</a>, its name is "mem", put the executable file into /bin/ in VoCore2.</p>
   <p>1. read from register/memory, for example: 0x10000060, pin control register</p>
   <p>example: <code>mem 0x10000060</code></p>
   <p>2. write to register/memory, must in 32bits(4bytes)</p>
   <p>example: <code>mem 0x10000064 0x05540555</code></p>
   <p>here is an example bash script flash the LED every second on VoCore2.(Ctrl+C stop it) </p>
   <code>mem 0x10000064 0x05540555; mem 0x10000604 0x1000; while [ 1 ]; do mem 0x10000634 0x1000; sleep 1; mem 0x10000644 0x1000; sleep 1; done</code>

  </div>

  <hr/>

  <footer class="container">
    <center><p class="footer-text"><small><b>VoCore Studio &copy; 2014-2016 &middot; Contact us:  <a href="mailto:support@vocore.io">support@vocore.io</a></b></small></p></center>
  </footer>

</body>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>

</html>
